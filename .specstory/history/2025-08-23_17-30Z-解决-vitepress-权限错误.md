<!-- Generated by SpecStory -->

# 解决 vitepress 权限错误 (2025-08-23 17:30Z)

_**User**_

看到我目前的工作流了吗

1
Run npx vitepress build
2
  npx vitepress build
3
  shell: /usr/bin/bash -e {0}
4
  
4
sh: 1: vitepress: Permission denied
5
Error: Process completed with exit code 127.

这个报错是什么问题

---

_**Assistant**_

我看到了你的工作流文件，这个错误是因为权限问题导致的。错误 `sh: 1: vitepress: Permission denied` 表明系统无法执行 `vitepress` 命令。

这个问题通常有几个可能的原因：

1. **VitePress 没有正确安装**：虽然你运行了 `npm install`，但 VitePress 可能没有正确安装到 `node_modules/.bin` 目录
2. **权限问题**：GitHub Actions 环境中的权限设置问题
3. **路径问题**：系统找不到 VitePress 可执行文件

让我帮你修复这个问题。我建议修改工作流文件，使用更可靠的方式来运行构建命令：


---

<details><summary>Edit file: .github/workflows/deploy.yml</summary>

我将修改构建步骤，使用 npm run 命令来运行 VitePress 构建，这样可以避免权限问题

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -22,5 +22,5 @@
        
        - name: Build
-         run: npx vitepress build  # ✅ 直接用 npx
+         run: npm run build  # 使用 npm run build 而不是直接调用 npx
        
        - name: Deploy to 1Panel
```

</details>

---

现在我需要检查你的 `package.json` 文件，确保有正确的构建脚本：


---

Read file: package.json

---

我看到你的 `package.json` 中的脚本名称是 `docs:build`，而不是 `build`。让我修正工作流文件：


---

<details><summary>Edit file: .github/workflows/deploy.yml</summary>

我将修改构建步骤，使用正确的脚本名称 docs:build

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -22,5 +22,5 @@
        
        - name: Build
-         run: npm run build  # 使用 npm run build 而不是直接调用 npx
+         run: npm run docs:build  # 使用正确的脚本名称
        
        - name: Deploy to 1Panel
```

</details>

---



---

