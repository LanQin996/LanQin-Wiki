# Islands PlaceholderAPI 变量参考

## 📋 概述

Islands 插件提供了丰富的 PlaceholderAPI 变量，所有变量均以 `%islands_` 为前缀。这些变量可以用于计分板、聊天格式、GUI界面等各种场景。

### 使用前提
- 安装 PlaceholderAPI 插件
- Islands 插件正常运行
- 确保玩家在线（大部分变量需要玩家在线）

---

## 🏝️ 基础信息变量

### 岛屿等级相关

#### `%islands_level%`
- **描述**: 当前岛屿等级
- **类型**: 数字
- **范围**: 1 到最大等级
- **示例输出**: `3`
- **使用场景**: 计分板、聊天格式、GUI显示

#### `%islands_maxlevel%`
- **描述**: 最大岛屿等级
- **类型**: 数字
- **范围**: 配置文件中设置的最大等级
- **示例输出**: `10`
- **使用场景**: 等级进度显示、升级提示

#### `%islands_next_level%`
- **描述**: 下一等级（如果已满级则为当前等级）
- **类型**: 数字
- **示例输出**: `4` (当前3级) 或 `10` (已满级)
- **使用场景**: 升级提示、进度显示

#### `%islands_progress_percent%`
- **描述**: 等级进度百分比
- **类型**: 数字
- **范围**: 0-100
- **示例输出**: `30`
- **计算方式**: (当前等级 / 最大等级) × 100
- **使用场景**: 进度条、等级显示

---

## 💰 经济/升级变量

### 升级费用相关

#### `%islands_upgrade_cost%`
- **描述**: 升级花费（格式化显示）
- **类型**: 字符串
- **格式**: 千分位分隔符
- **示例输出**: `1,234.00`
- **使用场景**: 升级界面、计分板

#### `%islands_upgrade_cost_plain%`
- **描述**: 升级花费（纯数字）
- **类型**: 数字
- **示例输出**: `1234`
- **使用场景**: 计算、比较

#### `%islands_balance%`
- **描述**: 玩家余额（需要Vault支持）
- **类型**: 字符串
- **格式**: 千分位分隔符
- **示例输出**: `5,678.90`
- **前置条件**: 需要安装Vault和经济插件
- **无Vault时**: 返回 `0`
- **使用场景**: 余额显示、购买界面

---

## 👥 团队/岛屿信息变量

### 团队身份相关

#### `%islands_team_id%`
- **描述**: 团队ID（岛主UUID字符串）
- **类型**: 字符串
- **示例输出**: `12345678-1234-1234-1234-123456789abc`
- **无团队时**: 返回空字符串
- **使用场景**: 数据存储、团队识别

#### `%islands_is_owner%`
- **描述**: 是否为岛主
- **类型**: 数字
- **值**: `1` (是岛主) 或 `0` (不是岛主)
- **使用场景**: 权限判断、界面显示

#### `%islands_is_member%`
- **描述**: 是否为团队成员（不含岛主）
- **类型**: 数字
- **值**: `1` (是成员) 或 `0` (不是成员)
- **使用场景**: 权限判断、团队状态显示

### 团队规模相关

#### `%islands_members_count%`
- **描述**: 成员数量（不含岛主）
- **类型**: 数字
- **示例输出**: `2`
- **使用场景**: 团队信息显示、成员统计

#### `%islands_team_size%`
- **描述**: 团队总人数（成员数 + 岛主）
- **类型**: 数字
- **示例输出**: `3`
- **计算方式**: 成员数 + 1
- **使用场景**: 团队规模显示

#### `%islands_team_online%`
- **描述**: 团队在线人数（包含岛主与成员）
- **类型**: 数字
- **示例输出**: `2`
- **使用场景**: 在线状态显示、活跃度统计

### 团队信息相关

#### `%islands_owner_name%`
- **描述**: 岛主名称
- **类型**: 字符串
- **示例输出**: `Steve`
- **无团队时**: 返回空字符串
- **使用场景**: 团队信息显示、聊天格式

---

## 🌍 世界信息变量

### 世界基础信息

#### `%islands_world%`
- **描述**: 岛屿世界名
- **类型**: 字符串
- **示例输出**: `world_island_123`
- **无岛屿时**: 返回空字符串
- **使用场景**: 世界信息显示、传送提示

#### `%islands_world_difficulty%`
- **描述**: 岛屿世界难度
- **类型**: 字符串
- **可能值**: `PEACEFUL`, `EASY`, `NORMAL`, `HARD`
- **示例输出**: `HARD`
- **使用场景**: 难度显示、游戏规则提示

#### `%islands_world_time%`
- **描述**: 岛屿世界时间（tick）
- **类型**: 数字
- **范围**: 0-24000
- **示例输出**: `12000`
- **使用场景**: 时间显示、昼夜状态

### 世界坐标信息

#### `%islands_spawn_x%`
- **描述**: 岛屿世界出生点X坐标
- **类型**: 数字
- **示例输出**: `100`
- **使用场景**: 坐标显示、传送功能

#### `%islands_spawn_y%`
- **描述**: 岛屿世界出生点Y坐标
- **类型**: 数字
- **示例输出**: `64`
- **使用场景**: 坐标显示、传送功能

#### `%islands_spawn_z%`
- **描述**: 岛屿世界出生点Z坐标
- **类型**: 数字
- **示例输出**: `200`
- **使用场景**: 坐标显示、传送功能

---

## 🛡️ 边界/半径变量

### 边界尺寸相关

#### `%islands_radius%`
- **描述**: 当前边界半径
- **类型**: 数字
- **示例输出**: `164`
- **计算方式**: 基础半径 + (等级 - 1) × 升级半径
- **使用场景**: 边界显示、大小比较

#### `%islands_diameter%`
- **描述**: 当前边界直径
- **类型**: 数字
- **示例输出**: `328`
- **计算方式**: 半径 × 2
- **使用场景**: 边界显示、大小比较

#### `%islands_next_radius%`
- **描述**: 升级后的边界半径
- **类型**: 数字
- **示例输出**: `214`
- **已满级时**: 返回当前半径
- **使用场景**: 升级预览、规划显示

### 边界设置相关

#### `%islands_warning_distance%`
- **描述**: 边界警告距离
- **类型**: 数字
- **来源**: 配置文件 `Island.WarningDistance`
- **示例输出**: `5`
- **使用场景**: 警告提示、安全距离显示

#### `%islands_border_visible%`
- **描述**: 团队边界是否显示
- **类型**: 字符串
- **值**: `显示` 或 `隐藏`
- **使用场景**: 边界状态显示、设置界面

---

## ⚙️ 世界/配置状态变量

### 岛屿设置状态

#### `%islands_lock%`
- **描述**: 岛屿是否锁定
- **类型**: 字符串
- **值**: `锁定` 或 `解锁`
- **使用场景**: 锁定状态显示、权限判断

#### `%islands_pvp%`
- **描述**: 是否允许PVP
- **类型**: 字符串
- **值**: `允许` 或 `禁止`
- **使用场景**: PVP状态显示、游戏规则提示

#### `%islands_pickup%`
- **描述**: 是否允许拾取
- **类型**: 字符串
- **值**: `允许` 或 `禁止` 
- **使用场景**: 拾取状态显示、游戏规则提示

#### `%islands_drop%`
- **描述**: 是否允许丢弃
- **类型**: 字符串
- **值**: `允许` 或 `禁止`
- **使用场景**: 丢弃状态显示、游戏规则提示

### 边界伤害设置

#### `%islands_border_damage%`
- **描述**: 超界是否受伤
- **类型**: 数字
- **值**: `1` (受伤) 或 `0` (不受伤)
- **来源**: 配置文件 `Island.BorderDamage`
- **使用场景**: 伤害设置显示、安全提示

#### `%islands_damage_amount%`
- **描述**: 超界伤害值
- **类型**: 数字
- **来源**: 配置文件 `Island.DamageAmount`
- **示例输出**: `2.0`
- **使用场景**: 伤害显示、安全提示

#### `%islands_damage_buffer%`
- **描述**: 超界伤害缓冲距离
- **类型**: 数字
- **来源**: 配置文件 `Island.DamageBuffer`
- **示例输出**: `5.0`
- **使用场景**: 安全距离显示、缓冲区域提示

---

## 📊 其他变量

### 全局统计

#### `%islands_count%`
- **描述**: 全服岛屿（团队）数量
- **类型**: 数字
- **示例输出**: `25`
- **使用场景**: 服务器统计、排行榜

### 邀请状态

#### `%islands_has_pending_invite%`
- **描述**: 是否有待处理的加入邀请
- **类型**: 数字
- **值**: `1` (有邀请) 或 `0` (无邀请)
- **使用场景**: 邀请提醒、状态显示

#### `%islands_inviter_name%`
- **描述**: 待处理邀请的邀请者名称
- **类型**: 字符串
- **示例输出**: `Alex`
- **无邀请时**: 返回空字符串
- **使用场景**: 邀请显示、接受/拒绝界面

---

## 🎯 使用示例

### 计分板示例

```
第1行: &6=== 岛屿信息 ===
第2行: &e等级: &a%islands_level%&7/&c%islands_maxlevel%
第3行: &e团队: &a%islands_owner_name%
第4行: &e成员: &a%islands_team_size%&7人 (&a%islands_team_online%&7在线)
第5行: &e边界: &a%islands_radius%&7格
第6行: &e升级费用: &a%islands_upgrade_cost%
第7行: &e余额: &a%islands_balance%
第8行: &6================
```

### 聊天格式示例

```
格式: &6[%islands_level%级] &e%player_name%&7: &f%message%
效果: [3级] Steve: 大家好！
```

### GUI界面示例

```
标题: &6岛屿管理 - %islands_owner_name%的岛屿
按钮1: &a升级岛屿 &7(&e%islands_upgrade_cost%&7)
按钮2: &b邀请成员 &7(&a%islands_members_count%&7/&c%islands_team_size%&7)
按钮3: &c锁定状态: &7%islands_lock%
按钮4: &ePVP状态: &7%islands_pvp%
按钮5: &d边界显示: &7%islands_border_visible%
```

### 权限判断示例

```
# 只有岛主可见的按钮
%islands_is_owner% == 1 ? "&a删除岛屿" : "&7删除岛屿"

# 只有成员可见的功能
%islands_is_member% == 1 ? "&a离开团队" : "&7离开团队"

# 状态显示（使用中文状态）
&e锁定状态: &7%islands_lock%
&ePVP状态: &7%islands_pvp%
&e边界显示: &7%islands_border_visible%
```

---

## ⚠️ 注意事项

### 1. 性能考虑
- 频繁查询的变量会影响性能
- 建议在计分板中合理使用，避免过多变量

### 2. 数据准确性
- 大部分变量需要玩家在线
- 离线玩家可能返回默认值或空值

### 3. 前置条件
- 经济相关变量需要Vault支持
- 某些变量需要特定权限

### 4. 错误处理
- 无效的变量会返回 `Invalid Param`
- 建议在使用前测试变量是否正常工作

### 5. 状态变量格式
- 部分状态变量返回中文文本（如：`开启`/`关闭`、`显示`/`关闭`）
- 这些变量适合直接显示，无需额外格式化

---

## 🔧 故障排除

### 常见问题

| 问题 | 可能原因 | 解决方案 |
|------|----------|----------|
| 变量返回0 | 玩家离线或无岛屿 | 确保玩家在线且有岛屿 |
| 变量返回空 | 无团队数据 | 检查团队数据是否正确 |
| 经济变量返回0 | Vault未安装 | 安装Vault和经济插件 |
| 状态变量显示异常 | 数据未更新 | 重新加载插件或重启服务器 |

### 调试方法

1. **测试单个变量**:
   ```
   /papi parse me %islands_level%
   ```

2. **查看所有变量**:
   ```
   /papi list islands
   ```

3. **检查插件状态**:
   ```
   /papi info islands
   ```

4. **测试状态变量**:
   ```
   /papi parse me %islands_lock%
   /papi parse me %islands_pvp%
   /papi parse me %islands_border_visible%
   ```